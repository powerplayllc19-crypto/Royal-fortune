<!-- Restored PWA-themed Age Gate: JS + Modal -->
<script>
  // Age Gate Functions (kept in <script> so inline onclick handlers can call them)
  (function () {
    const STORAGE_KEY = 'ageGateConfirmed';

    function showModal(modal) {
      if (!modal) return;
      modal.classList.remove('hidden');
      modal.removeAttribute('aria-hidden');
      document.documentElement.classList.add('overflow-hidden'); // prevent background scroll (Tailwind)
      // move focus for accessibility
      const confirmBtn = modal.querySelector('[data-age-confirm]');
      if (confirmBtn) confirmBtn.focus();
    }

    function hideModal(modal) {
      if (!modal) return;
      modal.classList.add('hidden');
      modal.setAttribute('aria-hidden', 'true');
      document.documentElement.classList.remove('overflow-hidden');
    }

    window.checkAgeGate = function checkAgeGate() {
      const ageConfirmed = (() => {
        try {
          return localStorage.getItem(STORAGE_KEY) === 'true';
        } catch (e) {
          console.warn('localStorage unavailable for age gate', e);
          return false;
        }
      })();

      const modal = document.getElementById('ageGateModal');
      if (!modal) return;
      if (!ageConfirmed) {
        showModal(modal);
      } else {
        hideModal(modal);
      }
    };

    window.confirmAgeGate = function confirmAgeGate() {
      try {
        localStorage.setItem(STORAGE_KEY, 'true');
      } catch (e) {
        console.warn('Could not persist age gate confirmation', e);
      }
      const modal = document.getElementById('ageGateModal');
      if (modal) hideModal(modal);
      // Broadcast event so other scripts/components can react if needed
      window.dispatchEvent(new CustomEvent('ageGateConfirmed'));
    };

    window.exitCasino = function exitCasino() {
      // Keep this explicit; change if you want a different external site
      window.location.href = 'https://google.com';
    };

    // Run on page load
    window.addEventListener('load', checkAgeGate);
  })();
</script>

<!-- Age Gate Modal (hidden by default; JS will reveal when needed) -->
<div id="ageGateModal" aria-hidden="true" class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center">
  <div class="w-full max-w-md mx-4 p-6 rounded-2xl border-4 border-[#d4af37] bg-gradient-to-b from-[#0b1020] to-[#1a1430] text-center">
    <div class="text-6xl mb-3">ðŸ”ž</div>
    <h2 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#f8e6b7] to-[#d4af37] mb-3">Age Verification Required</h2>
    <p class="text-gray-300 mb-4">
      You must be at least <strong>18 years of age</strong> (or 21 in some jurisdictions)
      to use Royal Fortune Casino.
    </p>
    <p class="text-sm text-gray-400 mb-6">
      By clicking "I Confirm", you acknowledge that this app is for entertainment purposes only
      and virtual currency has no cash value.
    </p>

    <button data-age-confirm onclick="confirmAgeGate()" class="btn-gold w-full px-6 py-3 rounded-full text-lg mb-3 focus:outline-none focus:ring-4 focus:ring-yellow-300">
      I Confirm I Am 18+
    </button>

    <button onclick="exitCasino()" class="w-full px-6 py-3 rounded-full bg-gray-700 hover:bg-gray-600 text-white">
      Exit
    </button>
  </div>
</div>